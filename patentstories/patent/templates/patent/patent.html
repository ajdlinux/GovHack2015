{% extends "site_base.html" %}

{% block title %}Patent #{{ patent.australian_appl_no }}{% if auspat.title %} - {{ auspat.title }}{% endif %}{% endblock %}

{% block content %}
    {% autoescape on %}
    <h1>Patent #{{ patent.australian_appl_no }}{% if auspat.title %} - {{ auspat.title }}{% endif %}</h1>

    {% if Summary %}
        <h2>Summary - {{ Summary.title }}</h2>
        <p>{{ Summary.body }}</p>
    {% endif %}

    <ul class="timeline">

    {% if auspat %}
    <li>
        <div class="timeline-badge success"><i class="glyphicon glyphicon-asterisk"></i></div>
        <div class="timeline-panel">
            <h4 class="timeline-title">
                <a href="http://pericles.ipaustralia.gov.au/ols/auspat/applicationDetails.do?applicationNo={{ patent.australian_appl_no }}">AusPat Database Information</a>
            </h4>

            <div class="timeline-body">
                <ul>
                    {% if auspat.title %}<li><b>Title:</b> {{ auspat.title }}</li>{% endif %}
                    {% if auspat.applicant %}<li><b>Applicant:</b> {{ auspat.applicant }}</li>{% endif %}
                    {% if auspat.inventor and auspat.inventor.0 %}<li><b>Inventors:</b><ul>{% for inventor in auspat.inventor %}<li>{{ inventor }}</li></ul></li>{% endfor %}{% endif %}
                    {% if auspat.extract %}<li><b>Extract:</b> <a href="{{ auspat.extract }}">{{ auspat.extract }}</a></li>{% endif %}
                    {% if auspat.specifications %}<li><b>Specifications:</b><ul>{% for spec, link in auspat.specifications.items %}<li><a href="{{ link }}">{{ spec }}</a></li>{% endfor %}</ul></li>{% endif %}
                </ul>
            </div>
        </div>
    </li>
    {% endif %}

    <li class="timeline-add"><div class="timeline-badge-mini success"><a href="annotate"><i class="glyphicon glyphicon-plus"></i></a></div></li>
    {% for event in timeline %}
        <li{% cycle '' ' class="timeline-inverted"' %}>
            <div class="timeline-badge {{ event.catagory }}"><i class="glyphicon {{ event.glyph }}"></i></div>
            <div class="timeline-panel">
                <h4 class="timeline-title">
                    {% if event.link %}<a href="{{ event.link }}">{% endif %}
                    {% if event.event %}{{ event.event }}{% else %}{{ event.annotation_type }}{% endif %}{% if event.title %} - {{ event.title }}{% endif %}
                    {% if event.link %}</a>{% endif %}
                </h4>
                <p><small class="text-muted"><i class="glyphicon glyphicon-time"></i> {{ event.date }}{% if event.link %} - <a href="{{ event.link }}">{{ event.link }}</a>{% endif %}</small></p>
                <div class="timeline-body">
                    {% if event.information %}
                        <ul>
                            {% for item in event.information %}
                                {% if item %}<li>{{ item }}</li>{% endif %}
                            {% endfor %}
                        </ul>
                    {% endif %}
                    {% if event.image %}
                        <div><img src="{{ event.image.url }}" alt="{{ event.image_alt }}" class="img-thumbnail img-responsive"></div>
                    {% endif %}
                    <p>{{ event.body }}</p>
                </div>
            </div>
        </li>

        <li class="timeline-add"><div class="timeline-badge-mini success"><a href="annotate"><i class="glyphicon glyphicon-plus"></i></a></div></li>
    {% endfor %}
    </ul>
    {% endautoescape %}
{% endblock %}
